<section class="blog-categories-section">
  <h2 class="blog-categories-title">{{ section.settings.heading }}</h2>
  <div class="blog-categories-tabs" id="blogCategoriesTabs">
    {% for block in section.blocks %}
      {% assign blog = blogs[block.settings.blog] %}
      <button class="blog-category-tab{% if forloop.first %} active{% endif %}" data-blog-handle="{{ blog.handle }}">{{ block.settings.tab_title | default: blog.title }}</button>
    {% endfor %}
  </div>
  <div class="blog-categories-content">
    {% for block in section.blocks %}
      {% assign blog = blogs[block.settings.blog] %}
      <div class="blog-category-content{% if forloop.first %} active{% endif %}" id="blog-{{ blog.handle }}">
        <h3>{{ block.settings.tab_title | default: blog.title }}</h3>
        <ul class="blog-category-articles">
          {% assign max_articles = section.settings.max_articles | default: 3 %}
          {% for article in blog.articles limit: max_articles %}
            <li>
              {% if article.image %}
                {% assign thumb_size = section.settings.thumb_size | default: 60 %}
                <img
                  class="blog-article-thumb"
                  src="{{ article.image | img_url: thumb_size | append: 'x' | append: thumb_size | append: '_crop_center' }}"
                  srcset="
                    {{ article.image | img_url: '60x60_crop_center' }} 60w,
                    {{ article.image | img_url: '120x120_crop_center' }} 120w,
                    {{ article.image | img_url: '240x240_crop_center' }} 240w,
                    {{ article.image | img_url: '320x320_crop_center' }} 320w
                  "
                  sizes="(max-width: 600px) 60px, (max-width: 900px) 120px, {{ thumb_size }}px"
                  alt="{{ article.title | escape }}"
                  width="{{ thumb_size }}"
                  height="{{ thumb_size }}"
                  loading="lazy"
                  style="width:{{ thumb_size }}px; height:{{ thumb_size }}px;"
                />
              {% endif %}
              <div class="blog-article-info">
                <a href="{{ article.url }}">{{ article.title }}</a>
                <div class="blog-article-excerpt">
                  {% if article.excerpt %}
                    {{ article.excerpt | strip_html | truncate: 120 }}
                  {% else %}
                    {{ article.content | strip_html | truncate: 120 }}
                  {% endif %}
                </div>
                <span class="blog-article-date">{{ article.published_at | date: '%b %d, %Y' }}</span>
                <a class="blog-article-read-more" href="{{ article.url }}">Read more</a>
              </div>
            </li>
          {% endfor %}
        </ul>
        <a class="blog-category-view-all" href="{{ blog.url }}">View all in {{ block.settings.tab_title | default: blog.title }}</a>
      </div>
    {% endfor %}
  </div>
</section>

<style>
.blog-categories-section {
  width: 100vw;
  min-height: 100vh;
  margin: 0;
  padding: 0;
  background: {{ section.settings.bg_color | default: '#fff' }};
  border-radius: 0;
  box-shadow: none;
  max-width: none;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  font-family: {{ section.settings.font_family | default: 'inherit' }};
  font-size: {{ section.settings.font_size | default: 16 }}px;
}
.blog-categories-title {
  text-align: center;
  margin-bottom: 1.5rem;
  font-size: 2rem;
  font-weight: 500;
  color: {{ section.settings.title_color | default: '#1a237e' }};
  letter-spacing: 0.01em;
  font-family: {{ section.settings.font_family | default: 'inherit' }};
}
.blog-categories-tabs {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 2rem;
}
.blog-category-tab {
  background: {{ section.settings.tab_color | default: '#e3eafc' }};
  border: none;
  padding: 0.75rem 2rem;
  cursor: pointer;
  border-radius: 0;
  font-weight: 600;
  font-size: 1rem;
  color: {{ section.settings.tab_text_color | default: '#1a237e' }};
  box-shadow: 0 1px 3px rgba(60, 64, 67, 0.08);
  transition: background 0.2s, color 0.2s, box-shadow 0.2s;
  position: relative;
  overflow: hidden;
  min-width: 120px;
  min-height: 48px;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: {{ section.settings.font_family | default: 'inherit' }};
}
.blog-category-tab.active {
  background: {{ section.settings.tab_active_color | default: '#3949ab' }};
  color: {{ section.settings.tab_active_text_color | default: '#fff' }};
  box-shadow: 0 4px 12px rgba(60, 64, 67, 0.18);
}
.blog-category-tab:active::after {
  content: "";
  position: absolute;
  left: 50%; top: 50%;
  width: 120%; height: 120%;
  background: rgba(255,255,255,0.3);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  animation: ripple 0.4s linear;
  pointer-events: none;
}
@keyframes ripple {
  from { opacity: 1; }
  to { opacity: 0; }
}
.blog-categories-content {
  max-width: 900px;
  margin: 0 auto;
  background: {{ section.settings.content_bg_color | default: '#f5f5f5' }};
  border-radius: 0 0 0 0;
  box-shadow: none;
  padding: 2rem 1.5rem 1.5rem 1.5rem;
  font-family: {{ section.settings.font_family | default: 'inherit' }};
}
.blog-category-content {
  display: none;
  animation: fadeIn 0.3s;
}
.blog-category-content.active {
  display: block;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(16px);}
  to { opacity: 1; transform: none;}
}
.blog-category-articles {
  list-style: none;
  padding: 0;
  margin: 0;
}
.blog-category-articles li {
  margin-bottom: 1.25rem;
  padding: 1rem 1.25rem;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(60, 64, 67, 0.07);
  transition: box-shadow 0.2s;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-family: {{ section.settings.font_family | default: 'inherit' }};
  font-size: {{ section.settings.font_size | default: 16 }}px;
}
.blog-article-thumb {
  width: 100%;
  max-width: {{ section.settings.thumb_size | default: 60 }}px;
  height: auto;
  aspect-ratio: 1 / 1;
  object-fit: cover;
  border-radius: 6px;
  flex-shrink: 0;
  background: #eee;
  box-shadow: 0 1px 2px rgba(60,64,67,0.08);
  display: block;
}
.blog-article-info {
  flex: 1 1 0;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}
.blog-category-articles a {
  color: {{ section.settings.link_color | default: '#3949ab' }};
  font-weight: 500;
  text-decoration: none;
  transition: color 0.2s;
  font-family: {{ section.settings.font_family | default: 'inherit' }};
}
.blog-category-articles a:hover {
  color: {{ section.settings.link_hover_color | default: '#1a237e' }};
  text-decoration: underline;
}
.blog-article-excerpt {
  font-size: 0.98em;
  color: {{ section.settings.excerpt_color | default: '#444' }};
  margin: 0.15em 0 0.1em 0;
  line-height: 1.4;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: normal;
  max-width: 100%;
  font-family: {{ section.settings.font_family | default: 'inherit' }};
}
.blog-article-date {
  display: block;
  font-size: 0.9em;
  color: {{ section.settings.date_color | default: '#757575' }};
  margin-top: 0.25rem;
}
.blog-article-read-more {
  display: inline-block;
  margin-top: 0.3em;
  color: {{ section.settings.link_color | default: '#3949ab' }};
  font-size: 0.97em;
  font-weight: 500;
  text-decoration: underline;
  transition: color 0.2s;
  font-family: {{ section.settings.font_family | default: 'inherit' }};
}
.blog-article-read-more:hover {
  color: {{ section.settings.link_hover_color | default: '#1a237e' }};
  text-decoration: underline;
}
.blog-category-view-all {
  display: inline-block;
  margin-top: 1.5rem;
  color: #fff;
  background: {{ section.settings.button_color | default: '#3949ab' }};
  padding: 0.7rem 1.5rem;
  border-radius: 24px;
  font-weight: 600;
  text-decoration: none;
  box-shadow: 0 2px 6px rgba(60, 64, 67, 0.11);
  transition: background 0.2s, box-shadow 0.2s;
  font-family: {{ section.settings.font_family | default: 'inherit' }};
  font-size: {{ section.settings.font_size | default: 16 }}px;
}
.blog-category-view-all:hover {
  background: {{ section.settings.button_hover_color | default: '#1a237e' }};
  box-shadow: 0 4px 12px rgba(60, 64, 67, 0.18);
  text-decoration: underline;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var tabs = document.querySelectorAll('.blog-category-tab');
  var contents = document.querySelectorAll('.blog-category-content');
  tabs.forEach(function(tab, idx) {
    tab.addEventListener('click', function() {
      tabs.forEach(function(t) { t.classList.remove('active'); });
      contents.forEach(function(c) { c.classList.remove('active'); });
      tab.classList.add('active');
      var handle = tab.getAttribute('data-blog-handle');
      var content = document.getElementById('blog-' + handle);
      if (content) content.classList.add('active');
    });
  });
});
</script>

{% schema %}
{
  "name": "Blog-tabs",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section heading",
      "default": "Explore Our Blog Categories"
    },
    {
      "type": "range",
      "id": "thumb_size",
      "label": "Thumbnail size (px)",
      "min": 32,
      "max": 160,
      "step": 4,
      "default": 60
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#fff"
    },
    {
      "type": "color",
      "id": "content_bg_color",
      "label": "Content background color",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#1a237e"
    },
    {
      "type": "color",
      "id": "tab_color",
      "label": "Tab color",
      "default": "#e3eafc"
    },
    {
      "type": "color",
      "id": "tab_text_color",
      "label": "Tab text color",
      "default": "#1a237e"
    },
    {
      "type": "color",
      "id": "tab_active_color",
      "label": "Active tab color",
      "default": "#3949ab"
    },
    {
      "type": "color",
      "id": "tab_active_text_color",
      "label": "Active tab text color",
      "default": "#fff"
    },
    {
      "type": "color",
      "id": "link_color",
      "label": "Link color",
      "default": "#3949ab"
    },
    {
      "type": "color",
      "id": "link_hover_color",
      "label": "Link hover color",
      "default": "#1a237e"
    },
    {
      "type": "color",
      "id": "excerpt_color",
      "label": "Excerpt color",
      "default": "#444"
    },
    {
      "type": "color",
      "id": "date_color",
      "label": "Date color",
      "default": "#757575"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button color",
      "default": "#3949ab"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button hover color",
      "default": "#1a237e"
    },
    {
      "type": "select",
      "id": "font_family",
      "label": "Font family",
      "default": "inherit",
      "options": [
        { "value": "inherit", "label": "Theme default" },
        { "value": "Arial, sans-serif", "label": "Arial" },
        { "value": "'Roboto', Arial, sans-serif", "label": "Roboto" },
        { "value": "'Open Sans', Arial, sans-serif", "label": "Open Sans" },
        { "value": "'Lato', Arial, sans-serif", "label": "Lato" },
        { "value": "'Montserrat', Arial, sans-serif", "label": "Montserrat" },
        { "value": "'Georgia', serif", "label": "Georgia" }
      ]
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Font size (px)",
      "min": 12,
      "max": 28,
      "step": 1,
      "default": 16
    },
    {
      "type": "range",
      "id": "max_articles",
      "label": "Max articles per blog tab",
      "min": 1,
      "max": 12,
      "step": 1,
      "default": 3
    }
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "Tab",
      "settings": [
        {
          "type": "blog",
          "id": "blog",
          "label": "Blog"
        },
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab title",
          "default": "Blog"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Blog-tabs",
      "category": "Blog",
      "blocks": [
        { "type": "tab" },
        { "type": "tab" },
        { "type": "tab" }
      ]
    }
  ]
}
{% endschema %}

