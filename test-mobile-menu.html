<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mobile Menu Fix</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            height: 200vh; /* Para poder hacer scroll */
            background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
        }
        
        .section-header {
            background: white;
            padding: 1rem;
            border-bottom: 1px solid #ccc;
            position: sticky;
            top: 0;
            z-index: 3;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header__icon--menu {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .menu-drawer {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            height: 50vh;
            background: white;
            border: 1px solid #ccc;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        #Details-menu-drawer-container[open] .menu-drawer {
            transform: translateX(0);
        }
        
        .content {
            padding: 2rem;
            text-align: center;
        }
        
        .scroll-indicator {
            position: fixed;
            top: 50%;
            right: 1rem;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
        }
        
        /* Incluir el CSS del fix */
        @media screen and (max-width: 990px) {
            .section-header.mobile-menu-open {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100% !important;
                z-index: 4 !important;
                background-color: white;
            }
        }
    </style>
</head>
<body>
    <div class="scroll-indicator">
        Scroll: <span id="scroll-pos">0</span>px
    </div>
    
    <header class="section-header">
        <div class="header">
            <h1>Test Mobile Menu</h1>
            <details id="Details-menu-drawer-container">
                <summary class="header__icon--menu">‚ò∞</summary>
                <div class="menu-drawer">
                    <p style="padding: 1rem;">Men√∫ de navegaci√≥n m√≥vil</p>
                    <p style="padding: 1rem;">El header deber√≠a mantenerse visible cuando este men√∫ est√° abierto, incluso si est√°s en la parte baja de la p√°gina.</p>
                </div>
            </details>
        </div>
    </header>
    
    <main class="content">
        <h2>Instrucciones de Test</h2>
        <p>1. Haz scroll hacia abajo en esta p√°gina</p>
        <p>2. Abre el men√∫ m√≥vil (‚ò∞)</p>
        <p>3. Verifica que el header se mantiene visible en la parte superior</p>
        
        <div style="height: 100vh; background: #f9f9f9; margin: 2rem 0; display: flex; align-items: center; justify-content: center;">
            <p>Contenido de la p√°gina - haz scroll hacia abajo</p>
        </div>
        
        <div style="height: 100vh; background: #f0f0f0; margin: 2rem 0; display: flex; align-items: center; justify-content: center;">
            <p>M√°s contenido - ahora abre el men√∫ m√≥vil desde aqu√≠</p>
        </div>
    </main>
    
    <script>
        // Incluir el JavaScript del fix
        (function() {
            function fixMobileMenu() {
                const menuToggle = document.querySelector('#Details-menu-drawer-container');
                const header = document.querySelector('.section-header');
                
                if (!menuToggle || !header) return;
                
                const observer = new MutationObserver(function() {
                    if (window.innerWidth <= 990 && menuToggle.hasAttribute('open')) {
                        // Men√∫ abierto en m√≥vil - forzar header visible
                        header.style.position = 'fixed';
                        header.style.top = '0';
                        header.style.zIndex = '4';
                        header.style.width = '100%';
                        header.style.left = '0';
                        header.classList.add('mobile-menu-open');
                        document.body.style.overflow = 'hidden';
                        console.log('‚úÖ Men√∫ abierto - Header fijado en la parte superior');
                    } else {
                        // Men√∫ cerrado - limpiar estilos
                        header.style.position = '';
                        header.style.top = '';
                        header.style.zIndex = '';
                        header.style.width = '';
                        header.style.left = '';
                        header.classList.remove('mobile-menu-open');
                        document.body.style.overflow = '';
                        console.log('‚úÖ Men√∫ cerrado - Estilos restaurados');
                    }
                });
                
                observer.observe(menuToggle, { attributes: true, attributeFilter: ['open'] });
                console.log('üöÄ Mobile Menu Fix inicializado');
            }
            
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', fixMobileMenu);
            } else {
                fixMobileMenu();
            }
        })();
        
        // Mostrar posici√≥n de scroll
        window.addEventListener('scroll', function() {
            document.getElementById('scroll-pos').textContent = Math.round(window.scrollY);
        });
    </script>
</body>
</html>