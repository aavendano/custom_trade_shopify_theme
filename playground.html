<div class="shortcode-collection-carousel-container page-width">
    <shopify-context type="collection" handle="${handle}">
        <template>
            <div class="shortcode-carousel-wrapper grid product-grid grid--2-col-tablet-down grid--3-col-desktop">
                <shopify-context type="collection" handle="${handle}">
                    <template>
                        <div class="collection">
                            <div class="product-grid">
                                <!-- Define a new context for the products within the collection -->
                                <shopify-list-context type="product" query="collection.products" first="12">
                                    <!-- This template is repeated for each product in the collection -->
                                    <template>
                                        <button shopify-attr--disabled="!product.availableForSale" class="product-card"
                                            onclick="getElementById('product-modal').showModal(); getElementById('product-modal-context').update(event);">
                                            <div class="product-card__image-container">
                                                <shopify-media max-images="1" width="280" height="280"
                                                    query="product.selectedOrFirstAvailableVariant.image"></shopify-media>
                                            </div>
                                            <div class="product-card__details">
                                                <div class="product-card__info">
                                                    <h3 class="product-card__title">
                                                        <span>
                                                            <!-- This span makes the entire card clickable -->
                                                            <span aria-hidden="true" class="product-card__link"></span>
                                                            <shopify-data query="product.title"></shopify-data>
                                                        </span>
                                                    </h3>
                                                    <p class="product-card__price">
                                                        <shopify-money
                                                            query="product.selectedOrFirstAvailableVariant.price"></shopify-money>
                                                    </p>
                                                    <p class="product-card__category">
                                                        <shopify-data
                                                            query="product.selectedOrFirstAvailableVariant.product.category.name"></shopify-data>
                                                    </p>
                                                </div>
                                            </div>
                                        </button>
                                    </template>
                                </shopify-list-context>
                            </div>
                        </div>
                        <shopify-cart id="cart"></shopify-cart>
                    </template>
                </shopify-context>
            </div>
        </template>
    </shopify-context>
</div>