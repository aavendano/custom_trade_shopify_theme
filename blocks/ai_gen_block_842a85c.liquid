{% doc %}
  @prompt
    Create a responsive theme block that displays collection cards from a metaobject named "collections" using the metafield "custom.other_collections" which is of type collection_list. The block must include a metaobject picker setting to select the specific metaobject entry. The block should iterate through each collection in the "custom.other_collections" metafield and display them as Material Design cards with elevation shadows, proper spacing, and clean design. Use mobile-first responsive design: 1 column on mobile, 2 columns on tablet, 3  columns on desktop. Each collection card should show the collection image, title, description, with smooth hover effects and proper touch targets for mobile. Ensure the block schema includes the metaobject picker and properly accesses the collection_list metafield to render individual collection cards with Material Design principles.

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-collection-cards-{{ ai_gen_id }} {
    padding: 20px 0;
  }

  .ai-collection-grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: 1fr;
    gap: 24px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 16px;
  }

  @media screen and (min-width: 768px) {
    .ai-collection-grid-{{ ai_gen_id }} {
      grid-template-columns: repeat(2, 1fr);
      gap: 32px;
      padding: 0 24px;
    }
  }

  @media screen and (min-width: 1024px) {
    .ai-collection-grid-{{ ai_gen_id }} {
      grid-template-columns: repeat(3, 1fr);
      gap: 40px;
    }
  }

  .ai-collection-card-{{ ai_gen_id }} {
    background: {{ block.settings.card_background }};
    border-radius: {{ block.settings.card_radius }}px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    min-height: 44px;
  }

  .ai-collection-card-{{ ai_gen_id }}:hover {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    transform: translateY(-4px);
  }

  .ai-collection-card-link-{{ ai_gen_id }} {
    display: block;
    text-decoration: none;
    color: inherit;
    height: 100%;
  }

  .ai-collection-image-container-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    height: {{ block.settings.image_height }}px;
    overflow: hidden;
  }

  .ai-collection-image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .ai-collection-card-{{ ai_gen_id }}:hover .ai-collection-image-{{ ai_gen_id }} {
    transform: scale(1.05);
  }

  .ai-collection-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    background-color: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-collection-placeholder-{{ ai_gen_id }} svg {
    width: 80px;
    height: 80px;
    opacity: 0.3;
  }

  .ai-collection-content-{{ ai_gen_id }} {
    padding: 24px;
  }

  .ai-collection-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    font-weight: 600;
    color: {{ block.settings.title_color }};
    margin: 0 0 12px 0;
    line-height: 1.3;
  }

  .ai-collection-description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_size }}px;
    color: {{ block.settings.description_color }};
    line-height: 1.5;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .ai-collection-empty-state-{{ ai_gen_id }} {
    text-align: center;
    padding: 60px 20px;
    color: #666;
    font-size: 16px;
  }

  .ai-collection-empty-state-{{ ai_gen_id }} svg {
    width: 64px;
    height: 64px;
    margin-bottom: 16px;
    opacity: 0.3;
  }

  @media screen and (max-width: 767px) {
    .ai-collection-content-{{ ai_gen_id }} {
      padding: 20px;
    }

    .ai-collection-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.title_size | times: 0.9 }}px;
    }

    .ai-collection-description-{{ ai_gen_id }} {
      font-size: {{ block.settings.description_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<div class="ai-collection-cards-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.metaobject_entry %}
    {% assign collections_metafield = metaobjects[block.settings.metaobject_entry].custom.other_collections %}
    
    {% if collections_metafield and collections_metafield.size > 0 %}
      <div class="ai-collection-grid-{{ ai_gen_id }}">
        {% for collection in collections_metafield %}
          <div class="ai-collection-card-{{ ai_gen_id }}">
            <a href="{{ collection.url }}" class="ai-collection-card-link-{{ ai_gen_id }}">
              <div class="ai-collection-image-container-{{ ai_gen_id }}">
                {% if collection.featured_image %}
                  <img
                    src="{{ collection.featured_image | image_url: width: 600 }}"
                    alt="{{ collection.featured_image.alt | escape }}"
                    class="ai-collection-image-{{ ai_gen_id }}"
                    loading="lazy"
                    width="600"
                    height="{{ block.settings.image_height }}"
                  >
                {% else %}
                  <div class="ai-collection-placeholder-{{ ai_gen_id }}">
                    {{ 'collection-1' | placeholder_svg_tag }}
                  </div>
                {% endif %}
              </div>
              <div class="ai-collection-content-{{ ai_gen_id }}">
                <h3 class="ai-collection-title-{{ ai_gen_id }}">
                  {{ collection.title }}
                </h3>
                
                {% if collection.description != blank %}
                  <p class="ai-collection-description-{{ ai_gen_id }}">
                    {{ collection.description | strip_html | truncate: 120 }}
                  </p>
                {% endif %}
              </div>
            </a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="ai-collection-empty-state-{{ ai_gen_id }}">
        {{ 'collection-1' | placeholder_svg_tag }}
        <p>No collections found in the selected metaobject entry.</p>
      </div>
    {% endif %}
  {% else %}
    <div class="ai-collection-empty-state-{{ ai_gen_id }}">
      {{ 'collection-1' | placeholder_svg_tag }}
      <p>Please select a metaobject entry to display collections.</p>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Collection cards",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "metaobject",
      "id": "metaobject_entry",
      "label": "Collections metaobject",
      "metaobject_type": "collections"
    },
    {
      "type": "header",
      "content": "Card style"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card background",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "card_radius",
      "min": 0,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Card border radius",
      "default": 12
    },
    {
      "type": "range",
      "id": "image_height",
      "min": 150,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "Image height",
      "default": 240
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 14,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Title size",
      "default": 20
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#333333"
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 14
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#666666"
    }
  ],
  "presets": [
    {
      "name": "Collection cards"
    }
  ],
  "tag": null
}
{% endschema %}